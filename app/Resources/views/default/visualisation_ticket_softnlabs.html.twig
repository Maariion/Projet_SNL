{% extends 'base.html.twig' %}
{% block body %}

    <div class="card-panel">

        <h2>
            Ticket
        </h2>

        {{ form_start(form, {'attr': {'novalidate':'novalidate'}}) }}
        <div class="row">

            <div class="input-field col s2">
            </div>

            <div class="input-field col s4">
                <label for="appbundle_utilisateur_nom">Client</label><br/><br/>
                {{ form_widget(form.idutilClient,{'attr':{'class':'validate'}}) }}
            </div>

            <div class="input-field col s4">
                <label for="appbundle_utilisateur_nom">Société</label><br/><br/>
                <select disabled><option>{{ ticket.idutilClient.organisation.nom }}</option></select>
            </div>

            <div class="input-field col s2">
            </div>

        </div>

        <div class="row">
            <div class="input-field col s2">
            </div>
            <div class="input-field col s8">
                <label for="appbundle_utilisateur_nom">Titre du ticket</label>
                {{ form_widget(form.titre,{'attr':{'class':'validate'}}) }}
            </div>
            <div class="input-field col s2">
            </div>
        </div>

        <div class="row">
            <div class="input-field col s2">
            </div>
            <div class="input-field col s8">
                <label for="appbundle_utilisateur_nom">Description</label>
                {{ form_widget(form.description,{'attr':{'class':'validate'}}) }}
            </div>
            <div class="input-field col s2">
            </div>
        </div>

        <div class="row">
            <div class="input-field col s3">
            </div>
            <div class="input-field col s2">
                <label for="appbundle_utilisateur_nom">Type de ticket</label><br/><br/>
                {{ form_widget(form.idcategorie,{'attr':{'class':'validate'}}) }}
            </div>
            <div class="input-field col s2">
                <label for="appbundle_utilisateur_nom">Solution concernée</label><br/><br/>
                {{ form_widget(form.idsysteme,{'attr':{'class':'validate'}}) }}
            </div>
            <div class="input-field col s2">
                <label for="appbundle_utilisateur_nom">Criticité</label><br/><br/>
                {{ form_widget(form.idcriticite,{'attr':{'class':'validate'}}) }}
            </div>
            <div class="input-field col s3">
            </div>
        </div>

        <div class="row">
            <div class="input-field col s3">
            </div>
            <div class="input-field col s3">
                <label for="appbundle_statut_definition">Statut actuel</label><br/><br/>
                {{ form_widget(form.idstatut,{'attr':{'class':'validate'}, 'id':'statut'}) }}
            </div>
            <div class="input-field col s3">
                <label for="appbundle_utilisateur_nom">Consultant affecté</label><br/><br/>
                    {{ form_widget(form.idutilConsultant)}}
            </div>
            <div class="input-field col s3">
            </div>
        </div>

        <div class="row">
            <div class="center-align">
                <button class="btn waves-effect waves-light" type="submit" name="enregistrer" >Envoyer
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </div>
        <!-- Modal Trigger -->
        <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Modal</a>

        <!-- Modal Structure -->
        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4>Modal Header</h4>
                <p>A bunch of text</p>
                {{ form_widget(form.tpsresolution)}}
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
            </div>
        </div>
    </div>

    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function() {
            $('select').material_select();
            $('.modal').modal();
            //$('#modal1').modal('open');

            $("appbundle_ticket[idstatut]").change(function(){
                // Check if current value is "audi"
                window.alert("LOOOOL");
                if($(this).text() === "Cloturé"){
                    // Show input field
                    $("#modal1").modal('open');   //This changes display to block
                }else{
                    // Hide input field
                    $("#modal1").hide();
                }
            });
        });

    </script>
{% endblock %}


